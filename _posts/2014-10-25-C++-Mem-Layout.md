---
layout: post
title: First Blood
---

{{ page.title }}
================
C++ 对象的内存布局
=================
注意这里是研究对象，不是内存管理，把简单事情搞复杂就是为了搞的更清楚。
---------------------------------------------------------------------
## sizeof(ClassName)大小
介绍一下C++类中各个概念的了解
###成员函数
所谓成员函数只是名义上的，实际上*成员函数并不存储在类的对象里边*，各个对象共享一段函数代码.
不在对象里，那如何访问呢？
####C++中的函数调用
系统为每个对象分配空间，那么类中的数据和函数在对象中是如何分布的呢？
可能你眼中的C++对象与其函数和数据的关系：
+------+ +------+ +------+ 
| data | | data | | data |
+------+ +------+ +------+
| func | | func | | func |
+------+ +------+ +------+
可是实际上：
+------+ +------+ +------+
|      | |      | |      |
| data | | data | | data |
|      | |      | |      |
+------+ +------+ +------+
+------+-----------------+
|           func         |
+------------------------+
*因此每个对象所占用空间是其数据成员的空间，注意这里static不算是对象的空间*
<pre><code>
class CBase {
    public:
        CBase(){}
        ~CBase(){}
        void printHello() {
            std::cout << "Hello" << std::endl;
        }
    private:
        int nCount;
        char ch;
};
</pre></code>
因此sizeof CBase 大小是 sizeof int + sizeof char = 5

问题来了，相同代码段，如何操作不同对象的数据？
各对象有自己的this指针，
<pre><code>
CBase b;
b.printHello();

</pre></code>
